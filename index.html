<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>K-DashX - Command Center</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script src="https://unpkg.com/@supabase/supabase-js@2"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <style>
        * { -webkit-tap-highlight-color: transparent; box-sizing: border-box; }
        body { background: #0a0a0f; color: #e2e8f0; margin: 0; font-family: system-ui, -apple-system, sans-serif; }
        .glass-card { background: linear-gradient(135deg, rgba(255,255,255,0.08), rgba(255,255,255,0.03)); backdrop-filter: blur(20px); border: 1px solid rgba(255,255,255,0.08); border-radius: 12px; }
        .page { display: none !important; }
        .page.active { display: block !important; }
        @media (max-width: 1023px) { 
            .desktop-sidebar { display: none !important; } 
            .bottom-nav { display: flex !important; position: fixed; bottom: 0; left: 0; right: 0; z-index: 50; background: rgba(10,10,15,0.98); border-top: 1px solid rgba(255,255,255,0.1); padding: 8px; } 
            .main-content { margin-left: 0 !important; padding-bottom: 80px !important; }
            .desktop-header { left: 0 !important; }
        }
        .bottom-nav { display: none; }
        .nav-btn { background: transparent; border: none; color: #94a3b8; cursor: pointer; padding: 12px; display: flex; align-items: center; gap: 12px; border-radius: 8px; width: 100%; text-align: left; }
        .nav-btn:hover { background: rgba(255,255,255,0.05); }
        .nav-btn.active { background: rgba(59,130,246,0.2); border: 1px solid rgba(59,130,246,0.3); color: #60a5fa; }
        .mobile-nav-btn { background: none; border: none; display: flex; flex-direction: column; align-items: center; gap: 4px; padding: 8px; color: #64748b; }
        .mobile-nav-btn.active { color: #60a5fa; }
        .agent-card { border-left: 3px solid; padding: 12px; margin-bottom: 8px; background: rgba(255,255,255,0.05); border-radius: 8px; transition: all 0.2s; }
        .agent-card:hover { background: rgba(255,255,255,0.08); transform: translateX(4px); }
        .agent-card.executive { border-left-color: #a855f7; }
        .agent-card.business { border-left-color: #3b82f6; }
        .agent-card.department { border-left-color: #f59e0b; }
        .agent-card.specialist { border-left-color: #10b981; }
        .subtask-card { padding: 12px; margin: 8px 0; background: rgba(59,130,246,0.1); border-radius: 8px; border: 1px solid rgba(59,130,246,0.3); }
    </style>
</head>
<body>
    <aside class="desktop-sidebar glass-card fixed left-0 top-0 h-full w-64 z-50">
        <div class="p-4 border-b border-white/5">
            <div class="flex items-center gap-3">
                <div class="w-10 h-10 rounded-xl bg-gradient-to-br from-blue-500 to-indigo-600 flex items-center justify-center text-white font-bold text-xl">K</div>
                <div>
                    <h1 class="font-semibold text-white">K-DashX</h1>
                    <p class="text-xs text-slate-500">Command Center</p>
                </div>
            </div>
        </div>
        <nav class="p-4 space-y-1">
            <button class="nav-btn active" data-nav="dashboard"><i class="fas fa-home w-5"></i>Dashboard</button>
            <button class="nav-btn" data-nav="org"><i class="fas fa-network-wired w-5"></i>Organization</button>
            <button class="nav-btn" data-nav="intent"><i class="fas fa-plus-circle w-5"></i>Intent</button>
            <button class="nav-btn" data-nav="execution"><i class="fas fa-play-circle w-5"></i>Execution</button>
            <button class="nav-btn" data-nav="settings"><i class="fas fa-cog w-5"></i>Settings</button>
        </nav>
        <div class="absolute bottom-4 left-4 right-4 p-3 rounded-lg bg-white/5 border border-white/10">
            <div class="flex items-center gap-2 text-xs text-green-400"><i class="fas fa-circle text-[8px]"></i><span>Connected</span></div>
        </div>
    </aside>
    <nav class="bottom-nav justify-around">
        <button class="mobile-nav-btn active" data-nav="dashboard"><i class="fas fa-home text-xl"></i><span class="text-[10px]">Dash</span></button>
        <button class="mobile-nav-btn" data-nav="org"><i class="fas fa-network-wired text-xl"></i><span class="text-[10px]">Org</span></button>
        <button class="mobile-nav-btn" data-nav="intent"><i class="fas fa-plus-circle text-xl"></i><span class="text-[10px]">New</span></button>
        <button class="mobile-nav-btn" data-nav="execution"><i class="fas fa-play-circle text-xl"></i><span class="text-[10px]">Exec</span></button>
        <button class="mobile-nav-btn" data-nav="settings"><i class="fas fa-cog text-xl"></i><span class="text-[10px]">Set</span></button>
    </nav>
    <header class="desktop-header glass-card fixed top-0 right-0 left-64 h-16 z-40 flex items-center justify-between px-6">
        <span class="text-green-400 text-sm"><i class="fas fa-circle text-xs mr-2"></i>Claude AI Active</span>
        <button onclick="alert('System halted')" class="px-3 py-2 bg-red-500/10 text-red-400 border border-red-500/30 rounded-lg text-sm"><i class="fas fa-power-off mr-2"></i>Halt</button>
    </header>
    <main class="main-content ml-64 pt-20 px-4 min-h-screen pb-20">
        
        <!-- Dashboard -->
        <div id="page-dashboard" class="page active">
            <h1 class="text-2xl font-bold text-white mb-6">Dashboard</h1>
            <div class="grid grid-cols-2 lg:grid-cols-4 gap-4 mb-6">
                <div class="glass-card p-4"><p class="text-sm text-slate-400">System</p><p class="text-xl font-bold text-green-400">Online</p></div>
                <div class="glass-card p-4"><p class="text-sm text-slate-400">Agents</p><p class="text-xl font-bold text-blue-400">20</p></div>
                <div class="glass-card p-4"><p class="text-sm text-slate-400">Skills</p><p class="text-xl font-bold text-emerald-400">103</p></div>
                <div class="glass-card p-4"><p class="text-sm text-slate-400">Active Tasks</p><p class="text-xl font-bold text-amber-400">0</p></div>
            </div>
            <div class="glass-card p-4">
                <h2 class="text-lg font-semibold text-white mb-4">Multi-Agent Orchestration</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-4 text-sm">
                    <div class="p-3 bg-white/5 rounded-lg">
                        <p class="text-blue-400 font-medium mb-1">1. Intent Analysis</p>
                        <p class="text-slate-400">Chief of Staff analyzes requirements</p>
                    </div>
                    <div class="p-3 bg-white/5 rounded-lg">
                        <p class="text-blue-400 font-medium mb-1">2. Skill Matching</p>
                        <p class="text-slate-400">Matches against 103 curated skills</p>
                    </div>
                    <div class="p-3 bg-white/5 rounded-lg">
                        <p class="text-blue-400 font-medium mb-1">3. Multi-Agent Dispatch</p>
                        <p class="text-slate-400">Distributes sub-tasks to specialists</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Organization -->
        <div id="page-org" class="page">
            <h1 class="text-2xl font-bold text-white mb-6">Organization</h1>
            <div class="space-y-4" id="org-container">
                <!-- Executive -->
                <div class="glass-card p-4">
                    <h3 class="text-purple-400 text-sm uppercase tracking-wider mb-3">Executive</h3>
                    <div class="agent-card executive">
                        <div class="flex items-center justify-between">
                            <div class="flex items-center gap-3">
                                <i class="fas fa-crown text-purple-400"></i>
                                <div>
                                    <p class="text-white font-medium">Chief of Staff</p>
                                    <p class="text-xs text-slate-400">ID: 0001 • Planning, Coordination, Strategy</p>
                                </div>
                            </div>
                            <span class="text-xs text-green-400">● Online</span>
                        </div>
                    </div>
                </div>
                <!-- Business Managers -->
                <div class="glass-card p-4">
                    <h3 class="text-blue-400 text-sm uppercase tracking-wider mb-3">Business Managers (7)</h3>
                    <div class="space-y-2">
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">TDS Enterprise</p><p class="text-xs text-slate-400">ID: 0002-1 • Pricing, Strategy, Analysis</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">Featured Apps</p><p class="text-xs text-slate-400">ID: 0002-2 • MCP, Postgres, API Design</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">Elite Solutions</p><p class="text-xs text-slate-400">ID: 0002-3 • Analysis, Positioning</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">Jumpstart CACFP</p><p class="text-xs text-slate-400">ID: 0002-4 • Marketing, Content</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">Client Services</p><p class="text-xs text-slate-400">ID: 0002-5 • Node.js, Backend, Testing</p></div></div><span class="text-xs text-amber-400">● Busy</span></div></div>
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">Licensing</p><p class="text-xs text-slate-400">ID: 0002-6 • Stripe, Billing, Auth</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card business"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-building text-blue-400"></i><div><p class="text-white font-medium">Education Tech</p><p class="text-xs text-slate-400">ID: 0002-7 • Compliance, Accessibility</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                    </div>
                </div>
                <!-- Departments -->
                <div class="glass-card p-4">
                    <h3 class="text-amber-400 text-sm uppercase tracking-wider mb-3">Departments (4)</h3>
                    <div class="space-y-2">
                        <div class="agent-card department"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-sitemap text-amber-400"></i><div><p class="text-white font-medium">Growth Dept</p><p class="text-xs text-slate-400">ID: 0003-1 • SEO, Copywriting | 3 specialists</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card department"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-sitemap text-amber-400"></i><div><p class="text-white font-medium">Product Dept</p><p class="text-xs text-slate-400">ID: 0003-2 • Debugging, Review | 3 specialists</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card department"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-sitemap text-amber-400"></i><div><p class="text-white font-medium">Operations</p><p class="text-xs text-slate-400">ID: 0003-3 • Deploy, Monitoring | 1 specialist</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card department"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-sitemap text-amber-400"></i><div><p class="text-white font-medium">Legal/Finance</p><p class="text-xs text-slate-400">ID: 0003-4 • Compliance, PCI | 1 specialist</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                    </div>
                </div>
                <!-- Specialists -->
                <div class="glass-card p-4">
                    <h3 class="text-emerald-400 text-sm uppercase tracking-wider mb-3">Specialists (8)</h3>
                    <div class="space-y-2">
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">Continuous Cognition</p><p class="text-xs text-slate-400">ID: 0004-1 • Planning, Analysis</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">macOS Engineer</p><p class="text-xs text-slate-400">ID: 0004-2 • Swift, Xcode</p></div></div><span class="text-xs text-amber-400">● Busy</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">Web Engineer</p><p class="text-xs text-slate-400">ID: 0004-3 • Frontend, Backend</p></div></div><span class="text-xs text-amber-400">● Busy</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">QA/Test Runner</p><p class="text-xs text-slate-400">ID: 0004-4 • Testing, Automation</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">Proposal Writer</p><p class="text-xs text-slate-400">ID: 0004-5 • Writing, Editing</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">Lead Research</p><p class="text-xs text-slate-400">ID: 0004-6 • Research, Analysis</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">Compliance Analyzer</p><p class="text-xs text-slate-400">ID: 0004-7 • GDPR, Security</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                        <div class="agent-card specialist"><div class="flex items-center justify-between"><div class="flex items-center gap-3"><i class="fas fa-user text-emerald-400"></i><div><p class="text-white font-medium">Brand Messaging</p><p class="text-xs text-slate-400">ID: 0004-8 • Branding, Design</p></div></div><span class="text-xs text-green-400">● Online</span></div></div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Intent with Multi-Agent Routing -->
        <div id="page-intent" class="page">
            <h1 class="text-2xl font-bold text-white mb-6">Submit Task</h1>
            <div class="grid grid-cols-1 lg:grid-cols-2 gap-6">
                <div>
                    <div class="glass-card p-6 mb-4">
                        <textarea id="task-input" class="w-full h-32 bg-white/5 border border-white/10 rounded-lg p-3 text-white mb-4" placeholder="Describe what you want to build..."></textarea>
                        <button onclick="analyzeAndRoute()" class="w-full py-3 bg-gradient-to-r from-blue-500 to-indigo-600 text-white rounded-lg font-medium">
                            <i class="fas fa-brain mr-2"></i>Analyze & Route
                        </button>
                    </div>
                    <div id="routing-preview" class="hidden glass-card p-4">
                        <h3 class="text-white font-medium mb-3">Routing Analysis</h3>
                        <div id="routing-content"></div>
                    </div>
                </div>
                <div>
                    <div class="glass-card p-6">
                        <h3 class="text-white font-medium mb-4">Multi-Agent Plan</h3>
                        <div id="execution-plan" class="space-y-3">
                            <p class="text-slate-400 text-center py-4">Submit a task to see execution plan</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Execution -->
        <div id="page-execution" class="page">
            <h1 class="text-2xl font-bold text-white mb-6">Execution</h1>
            <div class="glass-card p-8 text-center text-slate-400">
                <i class="fas fa-tasks text-4xl mb-3 opacity-50"></i>
                <p>No active tasks</p>
            </div>
        </div>

        <!-- Settings -->
        <div id="page-settings" class="page">
            <h1 class="text-2xl font-bold text-white mb-6">Settings</h1>
            <div class="glass-card p-6">
                <h3 class="text-white font-medium mb-4">103 Skills (6 Tiers)</h3>
                <div class="space-y-3 text-sm">
                    <div class="p-3 bg-white/5 rounded-lg"><p class="text-blue-400 font-medium">Tier 1: Core Engineering (10)</p><p class="text-slate-400">SwiftUI, React, Next.js, Testing, TDD, Debugging</p></div>
                    <div class="p-3 bg-white/5 rounded-lg"><p class="text-blue-400 font-medium">Tier 2: Licensing & Payments (4)</p><p class="text-slate-400">Stripe, Billing, Auth, PCI Compliance</p></div>
                    <div class="p-3 bg-white/5 rounded-lg"><p class="text-blue-400 font-medium">Tier 3: Lead Gen & Growth (6)</p><p class="text-slate-400">SEO, Copywriting, Marketing, Content Strategy</p></div>
                    <div class="p-3 bg-white/5 rounded-lg"><p class="text-blue-400 font-medium">Tier 4: Workflow & Ops (4)</p><p class="text-slate-400">Brainstorming, Planning, Execution, Verification</p></div>
                    <div class="p-3 bg-white/5 rounded-lg"><p class="text-blue-400 font-medium">Tier 5: Documents (6)</p><p class="text-slate-400">PDF, PPTX, DOCX, Dashboards, Storytelling</p></div>
                    <div class="p-3 bg-white/5 rounded-lg"><p class="text-blue-400 font-medium">Plus 73 Additional Specialized Skills</p></div>
                </div>
            </div>
        </div>
    </main>

<script>
// Navigation
document.querySelectorAll('[data-nav]').forEach(function(btn) {
    btn.addEventListener('click', function(e) {
        e.preventDefault();
        var page = this.getAttribute('data-nav');
        document.querySelectorAll('.page').forEach(function(p) { p.classList.remove('active'); });
        document.getElementById('page-' + page).classList.add('active');
        document.querySelectorAll('.nav-btn, .mobile-nav-btn').forEach(function(b) { b.classList.remove('active'); });
        document.querySelectorAll('[data-nav="' + page + '"]').forEach(function(b) { b.classList.add('active'); });
    });
});

// Multi-Agent Routing
function analyzeAndRoute() {
    var intent = document.getElementById('task-input').value.trim();
    if (!intent) return;
    
    var lower = intent.toLowerCase();
    var agents = [];
    var subtasks = [];
    
    // Always include Chief of Staff
    agents.push({name: 'Chief of Staff', role: 'Planning & Coordination'});
    subtasks.push({agent: 'Chief of Staff', task: 'Analyze intent and create execution plan', duration: '10 min'});
    
    // Route based on keywords
    if (lower.includes('stripe') || lower.includes('payment')) {
        agents.push({name: 'Licensing', role: 'Payment Integration'});
        agents.push({name: 'Legal/Finance', role: 'Compliance'});
        subtasks.push({agent: 'Licensing', task: 'Integrate Stripe payment processing', duration: '45 min'});
        subtasks.push({agent: 'Legal/Finance', task: 'Verify PCI compliance', duration: '20 min'});
    }
    
    if (lower.includes('web') || lower.includes('app') || lower.includes('site')) {
        agents.push({name: 'Client Services', role: 'Backend Development'});
        agents.push({name: 'Web Engineer', role: 'Frontend Development'});
        agents.push({name: 'Product Dept', role: 'Architecture'});
        subtasks.push({agent: 'Product Dept', task: 'Design system architecture', duration: '30 min'});
        subtasks.push({agent: 'Web Engineer', task: 'Build frontend components', duration: '2 hrs'});
        subtasks.push({agent: 'Client Services', task: 'Develop backend APIs', duration: '2 hrs'});
    }
    
    if (lower.includes('test') || lower.includes('qa')) {
        agents.push({name: 'QA/Test Runner', role: 'Testing'});
        subtasks.push({agent: 'QA/Test Runner', task: 'Test functionality and edge cases', duration: '1 hr'});
    }
    
    if (lower.includes('ios') || lower.includes('mac') || lower.includes('swift')) {
        agents.push({name: 'macOS Engineer', role: 'iOS Development'});
        subtasks.push({agent: 'macOS Engineer', task: 'Build iOS/macOS components', duration: '2 hrs'});
    }
    
    if (lower.includes('seo') || lower.includes('marketing') || lower.includes('copy')) {
        agents.push({name: 'Jumpstart CACFP', role: 'Marketing Strategy'});
        agents.push({name: 'Growth Dept', role: 'SEO & Content'});
        agents.push({name: 'Lead Research', role: 'Research & Analysis'});
        subtasks.push({agent: 'Lead Research', task: 'Research keywords and competitors', duration: '30 min'});
        subtasks.push({agent: 'Growth Dept', task: 'Optimize SEO and content', duration: '1 hr'});
    }
    
    // Always include deployment and final verification
    agents.push({name: 'Operations', role: 'Deployment'});
    agents.push({name: 'Chief of Staff', role: 'Final Verification'});
    subtasks.push({agent: 'Operations', task: 'Deploy to production', duration: '20 min'});
    subtasks.push({agent: 'Chief of Staff', task: 'Verify completion and integrate results', duration: '10 min'});
    
    // Show routing preview
    document.getElementById('routing-preview').classList.remove('hidden');
    var routingHtml = '<p class="text-slate-400 mb-2">Assigned Agents:</p>';
    agents.forEach(function(a) {
        routingHtml += '<div class="flex items-center gap-2 mb-1"><i class="fas fa-robot text-blue-400"></i><span class="text-white">' + a.name + '</span><span class="text-slate-500 text-sm">- ' + a.role + '</span></div>';
    });
    document.getElementById('routing-content').innerHTML = routingHtml;
    
    // Show execution plan
    var planHtml = '';
    subtasks.forEach(function(st, i) {
        planHtml += '<div class="subtask-card"><div class="flex justify-between items-start"><div><p class="text-white font-medium">' + (i+1) + '. ' + st.agent + '</p><p class="text-slate-400 text-sm">' + st.task + '</p></div><span class="text-xs text-blue-400">' + st.duration + '</span></div></div>';
    });
    document.getElementById('execution-plan').innerHTML = planHtml;
}
</script>
</body>
</html>
